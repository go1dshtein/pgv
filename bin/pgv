#!/usr/bin/env python2.7
import logging
import os
import pgv.config
import pgv.utils
import pgv.argparser


if __name__ == "__main__":
    args = pgv.argparser.Parser().parse()
    config = pgv.config.parse(args.config)
    pgv.utils.setup_logging(config.logging)
    logger = logging.getLogger(__name__)
    try:
        pgv.utils.execute(config, args)
    except Exception, e:
        logger.exception(e)
        os._exit(1)
    os._exit(0)
